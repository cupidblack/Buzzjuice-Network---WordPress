{"version":3,"file":"portal-form.js","mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,KAAKA,CAAEC,MAAM,EAAG;EACxB,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAIC,UAAU,CAAED,OAAO,EAAEF,MAAO,CAAE,CAAC;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASI,eAAeA,CAAEC,KAAK,EAAG;EACjC,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,CAACC,QAAQ,CAAE,GAAI,CAAC,EAAG;IACxD,OAAOD,KAAK;EACb;EAEA,OAAO,GAAGA,KAAK,GAAG;AACnB;;;;;;;;;;;ACrCA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACmD;AACC;AAC0C;;AAE9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiBM,SAAS,IAAM;EAC/B,OAAO;IACN,GAAGJ,wEAAI;IAAE,GAAG;MAEX;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACGI,SAAS;MAET;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACGC,SAAS,EAAE,IAAI;MAEf;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACGC,YAAY,EAAE,KAAK;MAEnB;AACH;AACA;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","sources":["webpack://AFFWP.portal/./src/helpers/helpers.js","webpack://AFFWP.portal/external window [\"AFFWP\",\"portal\",\"alpineForm\"]","webpack://AFFWP.portal/external window [\"AFFWP\",\"portal\",\"sdk\"]","webpack://AFFWP.portal/webpack/bootstrap","webpack://AFFWP.portal/webpack/runtime/compat get default export","webpack://AFFWP.portal/webpack/runtime/define property getters","webpack://AFFWP.portal/webpack/runtime/hasOwnProperty shorthand","webpack://AFFWP.portal/webpack/runtime/make namespace object","webpack://AFFWP.portal/./src/portal-form/portal-form.js"],"sourcesContent":["/**\n * Helper Functions.\n *\n * Generic helper functions specific to AffilaiteWP Affiliate Portal.\n *\n * @author Alex Standiford\n * @since 1.0.0\n */\n\n/**\n * Pause.\n *\n * Delays script execution for the specified amount of time.\n *\n * @since 1.0.0\n * @param length Amount of time to delay, in milliseconds.\n *\n * @returns {Promise} Resolved promise after specified length\n */\nfunction pause( length ) {\n\treturn new Promise( resolve => setTimeout( resolve, length ) )\n}\n\n/**\n * Adds a trailing slash to the input value, if it does not already have one.\n *\n * @since 1.0.0\n * @param input {string} The value to append a slash.\n *\n * @returns {string} The appended string.\n */\nfunction trailingslashit( input ) {\n\tif( typeof input !== 'string' || input.endsWith( '/' ) ) {\n\t\treturn input;\n\t}\n\n\treturn `${input}/`;\n}\n\nexport { pause, trailingslashit}","module.exports = window[\"AFFWP\"][\"portal\"][\"alpineForm\"];","module.exports = window[\"AFFWP\"][\"portal\"][\"sdk\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Form.\n *\n * Works with forms to handle data validation and other form interactions.\n *\n * @author Alex Standiford\n * @since 1.0.0\n * @global form\n *\n */\n\n/**\n * Internal Dependencies\n */\nimport form from '@affiliatewp-portal/alpine-form';\nimport { pause } from \"@affiliatewp-portal/helpers\";\nimport { portalSectionFields, validateControl, submitSection } from '@affiliatewp-portal/sdk';\n\n/**\n * Form handler.\n *\n * Works with forms to handle field validation, and submission.\n *\n * @param {string} sectionId The Section ID from which the fields should be fetched.\n *\n * @since 1.0.0\n * @access private\n * @global form\n *\n * @returns object The form AlpineJS object.\n */\nexport default ( sectionId ) => {\n\treturn {\n\t\t...form, ...{\n\n\t\t\t/**\n\t\t\t * Section ID.\n\t\t\t *\n\t\t\t * The section ID that contains the form fields.\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @type {string} The section ID\n\t\t\t */\n\t\t\tsectionId,\n\n\t\t\t/**\n\t\t\t * Is Loading.\n\t\t\t *\n\t\t\t * Set to true if this item is loading.\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @type {boolean} True if loading, otherwise false.\n\t\t\t */\n\t\t\tisLoading: true,\n\n\t\t\t/**\n\t\t\t * Is Validating.\n\t\t\t *\n\t\t\t * Set to true if this item is validating fields.\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @type {boolean} True if loading, otherwise false.\n\t\t\t */\n\t\t\tisValidating: false,\n\n\t\t\t/**\n\t\t\t * Is Submitting.\n\t\t\t *\n\t\t\t * Set to true if this item is submitting the form.\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @type {boolean} True if loading, otherwise false.\n\t\t\t */\n\t\t\tisSubmitting: false,\n\n\t\t\t/**\n\t\t\t * Showing success message.\n\t\t\t *\n\t\t\t * Whether or not the success message is showing (during submission).\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @type boolean\n\t\t\t */\n\t\t\tshowingSuccessMessage: false,\n\n\t\t\t/**\n\t\t\t * Export Fields.\n\t\t\t *\n\t\t\t * Converts Alpine form fields to key => value pairs for REST submissions & validation.\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @returns object Object of values keyed by the field ID.\n\t\t\t */\n\t\t\texportFields() {\n\t\t\t\treturn this.fields.reduce( ( acc, field ) => {\n\t\t\t\t\tacc[field.id] = field.value;\n\t\t\t\t\treturn acc;\n\t\t\t\t}, {} );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Has Validations.\n\t\t\t *\n\t\t\t * Returns true if the specified control has validations.\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @param {String} id Control ID.\n\t\t\t *\n\t\t\t * @returns {boolean} True if the field has validations, otherwise false.\n\t\t\t */\n\t\t\thasValidations( id ) {\n\t\t\t\tconst field = this.getField( id );\n\t\t\t\tif ( false === field ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true === field.hasValidations;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Validate Control.\n\t\t\t *\n\t\t\t * Validates a control by the provided ID, and sets the error if so\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @param {String} id Control ID.\n\t\t\t *\n\t\t\t * @returns {Promise<void>}\n\t\t\t */\n\t\t\tasync validateControl( id ) {\n\n\t\t\t\t// Bail early if this field has no validations.\n\t\t\t\tif ( false === this.hasValidations( id ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.isValidating = true;\n\n\t\t\t\tconst response = await validateControl( id, this.exportFields() );\n\n\t\t\t\t// Get the passed IDs.\n\t\t\t\tconst passed = response.validations.passed.map( validation => validation.id );\n\n\t\t\t\t// Remove all errors that passed this time\n\t\t\t\tthis.removeErrors( passed );\n\n\t\t\t\t// Add any errors that failed.\n\t\t\t\tthis.addErrors( response.validations.failed );\n\n\t\t\t\tthis.isValidating = false;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Setup Submit.\n\t\t\t *\n\t\t\t * Sets up the default directives for the submit button. Intended to be called using Alpine's x-spread directive.\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @returns {object} Directives that should be applied to the submit button by default.\n\t\t\t */\n\t\t\tsetupSubmit() {\n\t\t\t\treturn {\n\t\t\t\t\t['x-bind:disabled']() {\n\t\t\t\t\t\treturn this.hasErrors() || this.isLoading || this.isValidating || this.isSubmitting;\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Default Directives.\n\t\t\t *\n\t\t\t * Sets up the default directives for a field.\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @param {string} id The control ID from which directives should be constructed.\n\t\t\t * @param {string} type The input type, such as text, or checkbox.\n\t\t\t *\n\t\t\t * @returns {object} Directives that should be applied to all inputs by default.\n\t\t\t */\n\t\t\tsetupField( id, type = '', value = '' ) {\n\t\t\t\t// Bind the parent function to this instance. this is kind-of like running parent::function() in PHP.\n\t\t\t\tconst setupControl = form.setupField.bind( this );\n\n\t\t\t\t// Get the default directives\n\t\t\t\tconst parentDirectives = setupControl( id, type, value );\n\t\t\t\tconst parentInput = parentDirectives['x-on:input'].bind( this );\n\n\t\t\t\t// A list of validations that should not have an input delay.\n\t\t\t\tconst hasNoDelay = ['checkbox', 'select', 'radio'].includes( type );\n\n\t\t\t\t// AP-specific directives.\n\t\t\t\tconst additionalDirectives = {\n\t\t\t\t\t['x-on:input']( event ) {\n\t\t\t\t\t\tparentInput( event )\n\n\t\t\t\t\t\t// Run field validations.\n\t\t\t\t\t\tif ( hasNoDelay ) {\n\t\t\t\t\t\t\tthis.validateControl( id )\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst fieldIndex = this.fields.findIndex( ( field ) => field.id === id );\n\n\t\t\t\t\t\t\t// Maybe reset the timeout, if it is already set.\n\t\t\t\t\t\t\tif ( undefined !== this.fields[fieldIndex].validating ) {\n\t\t\t\t\t\t\t\twindow.clearTimeout( this.fields[fieldIndex].validating );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.isLoading = true;\n\n\t\t\t\t\t\t\tthis.fields[fieldIndex].validating = window.setTimeout( () => {\n\t\t\t\t\t\t\t\tthis.validateControl( id )\n\t\t\t\t\t\t\t\tdelete this.fields[fieldIndex].validating;\n\t\t\t\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\t\t\t}, 200 )\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t['x-on:blur']() {\n\t\t\t\t\t\tthis.validateControl( id )\n\t\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Spread (combine) the two objects into a single object.\n\t\t\t\treturn { ...parentDirectives, ...additionalDirectives };\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Submit Form.\n\t\t\t *\n\t\t\t * Actions that should be taken when the form is submitted.\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @returns {Promise<void>}\n\t\t\t */\n\t\t\tasync submitForm() {\n\t\t\t\tthis.isSubmitting = true;\n\t\t\t\tconst response = await submitSection( this.sectionId, this.exportFields() );\n\t\t\t\t// remove all errors.\n\t\t\t\tthis.removeErrors( response.validations.passed );\n\t\t\t\tthis.addErrors( response.validations.failed );\n\n\t\t\t\tthis.isSubmitting = false;\n\n\t\t\t\tif ( !this.hasErrors() ) {\n\t\t\t\t\tthis.flashSuccessMessage();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Flash Success Message.\n\t\t\t *\n\t\t\t * Flashes the success message.\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @returns {Promise<void>}\n\t\t\t */\n\t\t\tasync flashSuccessMessage() {\n\t\t\t\tthis.showingSuccessMessage = true;\n\t\t\t\tawait pause( 1000 );\n\t\t\t\tthis.showingSuccessMessage = false;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Sets up the form.\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @returns {Promise<void>}\n\t\t\t */\n\t\t\tsetupForm() {\n\t\t\t\treturn {\n\t\t\t\t\tasync ['x-on:submit']( event ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tthis.submitForm();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Init.\n\t\t\t *\n\t\t\t * Fires when this object is set up.\n\t\t\t *\n\t\t\t * @since      1.0.0\n\t\t\t * @access     public\n\t\t\t *\n\t\t\t * @returns {Promise<void>}\n\t\t\t */\n\t\t\tasync init() {\n\n\t\t\t\t// simulate a fetch request.\n\t\t\t\tconst response = await portalSectionFields( this.sectionId )\n\n\t\t\t\tthis.fields = response.fields.map( ( field ) => {\n\t\t\t\t\tif ( 'checkbox' === field.type ) {\n\t\t\t\t\t\tif ( 'on' === field.value ) {\n\t\t\t\t\t\t\tfield.value = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( 'off' === field.value ) {\n\t\t\t\t\t\t\tfield.value = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn field;\n\t\t\t\t} );\n\n\t\t\t\tthis.isLoading = false;\n\t\t\t}\n\t\t}\n\t}\n};\n"],"names":["pause","length","Promise","resolve","setTimeout","trailingslashit","input","endsWith","form","portalSectionFields","validateControl","submitSection","sectionId","isLoading","isValidating","isSubmitting","showingSuccessMessage","exportFields","fields","reduce","acc","field","id","value","hasValidations","getField","response","passed","validations","map","validation","removeErrors","addErrors","failed","setupSubmit","x-bind:disabled","hasErrors","setupField","type","setupControl","bind","parentDirectives","parentInput","hasNoDelay","includes","additionalDirectives","x-on:input","event","fieldIndex","findIndex","undefined","validating","window","clearTimeout","x-on:blur","submitForm","flashSuccessMessage","setupForm","x-on:submit","preventDefault","init"],"sourceRoot":""}