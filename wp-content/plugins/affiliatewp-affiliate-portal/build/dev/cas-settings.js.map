{"version":3,"file":"cas-settings.js","mappings":";;;;;;;;;;AAAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAC0D;;AAE1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,QAAQA,CAAA,EAAG;EACnB,MAAMC,IAAI,GAAGF,sEAAW,CAAC,CAAC;EAC1B,OAAO;IACN,GAAGE,IAAI;IAAE,GAAG;MAEX;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACGC,SAAS,EAAE,iCAAiC;MAE5C;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACGC,YAAY,EAAE,EAAE;MAEhB;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACGC,gBAAgBA,CAAA,EAAG;QAClB,MAAMC,IAAI,GAAG,IAAI,CAACC,QAAQ,CAAE,+BAAgC,CAAC;QAE7D,IAAK,KAAK,KAAKD,IAAI,EAAG;UACrB,OAAO,KAAK;QACb;QAEA,IAAK,IAAI,CAACF,YAAY,KAAKE,IAAI,CAACE,KAAK,IAAI,EAAE,KAAKF,IAAI,CAACE,KAAK,EAAG;UAC5D,OAAO,KAAK;QACb;QAEA,OAAO,IAAI;MACZ,CAAC;MAED;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,MAAMC,kBAAkBA,CAAA,EAAG;QAE1B;QACA,IAAI,CAACC,gBAAgB,CAAE,sCAAsC,EAAE,KAAM,CAAC;QACtE,IAAI,CAACA,gBAAgB,CAAE,+BAA+B,EAAE,EAAG,CAAC;QAC5D,IAAI,CAACC,YAAY,GAAG,IAAI;;QAExB;QACA,IAAI,CAACC,YAAY,CAAE,CAAC,+BAA+B,EAAE,sCAAsC,CAAE,CAAC;QAC9F,MAAMC,OAAO,CAACC,GAAG,CAAE,CAClB,IAAI,CAACC,eAAe,CAAE,+BAAgC,CAAC,EACvD,IAAI,CAACA,eAAe,CAAE,sCAAuC,CAAC,CAC7D,CAAC;QACH,IAAI,CAACJ,YAAY,GAAG,KAAK;MAC1B,CAAC;MAED;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,MAAMI,eAAeA,CAAEC,EAAE,EAAG;QAC3B,MAAMD,eAAe,GAAGb,IAAI,CAACa,eAAe,CAACE,IAAI,CAAE,IAAK,CAAC;QAEzD,IAAK,+BAA+B,KAAKD,EAAE,EAAG;UAC7C,MAAM,IAAI,CAACP,kBAAkB,CAAC,CAAC;QAChC;QAEAM,eAAe,CAAEC,EAAG,CAAC;MACtB,CAAC;MAED;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACGE,sBAAsBA,CAAA,EAAG;QACxB,IAAK,IAAI,KAAK,IAAI,CAACC,SAAS,EAAG;UAC9B,OAAO,KAAK;QACb;QAEA,MAAMb,IAAI,GAAG,IAAI,CAACC,QAAQ,CAAE,+BAAgC,CAAC;QAE7D,IAAK,KAAK,KAAKD,IAAI,EAAG;UACrB,OAAO,KAAK;QACb;QAEA,IAAK,EAAE,KAAK,IAAI,CAACF,YAAY,IAAI,EAAE,KAAKE,IAAI,CAACE,KAAK,EAAG;UACpD,OAAO,KAAK;QACb;QAEA,OAAO,IAAI;MACZ,CAAC;MAED;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,MAAMY,UAAUA,CAAA,EAAG;QAClB,MAAMA,UAAU,GAAGlB,IAAI,CAACkB,UAAU,CAACH,IAAI,CAAE,IAAK,CAAC;QAC/C,MAAMG,UAAU,CAAC,CAAC;QAClB,IAAI,CAACX,kBAAkB,CAAC,CAAC;QACzB,IAAI,CAACY,SAAS,CAAC,CAAC;MACjB,CAAC;MAED;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACGA,SAASA,CAAA,EAAG;QACX;QACA,MAAMf,IAAI,GAAG,IAAI,CAACC,QAAQ,CAAE,+BAAgC,CAAC;QAE7D,IAAK,KAAK,KAAKD,IAAI,EAAG;UACrB,IAAI,CAACF,YAAY,GAAGE,IAAI,CAACE,KAAK;QAC/B;MACD,CAAC;MAED;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACG,MAAMc,IAAIA,CAAA,EAAG;QACZ,MAAMA,IAAI,GAAGpB,IAAI,CAACoB,IAAI,CAACL,IAAI,CAAE,IAAK,CAAC;QACnC,MAAMK,IAAI,CAAC,CAAC;QACZ,IAAI,CAACD,SAAS,CAAC,CAAC;MACjB;IAED;EACD,CAAC;AACF;AAEA,iEAAepB,QAAQ,E","sources":["webpack://AFFWP.portal/external window [\"AFFWP\",\"portal\",\"portalForm\"]","webpack://AFFWP.portal/webpack/bootstrap","webpack://AFFWP.portal/webpack/runtime/compat get default export","webpack://AFFWP.portal/webpack/runtime/define property getters","webpack://AFFWP.portal/webpack/runtime/hasOwnProperty shorthand","webpack://AFFWP.portal/webpack/runtime/make namespace object","webpack://AFFWP.portal/./src/integrations/cas-settings/index.js"],"sourcesContent":["module.exports = window[\"AFFWP\"][\"portal\"][\"portalForm\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Custom Affiliate Slugs Settings Handler.\n *\n * Works with the settings page template to handle slug validation.\n *\n * @author Alex Standiford\n * @since 1.0.0\n * @global CASSettings\n *\n */\n\n/**\n * Internal Dependencies\n */\nimport prepareForm from '@affiliatewp-portal/portal-form';\n\n/**\n * Custom Affiliate Slugs Settings screen AlpineJS handler.\n *\n * Works with the settings page template to handle slug validation.\n *\n * @since 1.0.0\n * @access public\n * @global CASSettings\n *\n * @returns object The AlpineJS object.\n */\nfunction settings() {\n\tconst form = prepareForm();\n\treturn {\n\t\t...form, ...{\n\n\t\t\t/**\n\t\t\t * Section ID.\n\t\t\t *\n\t\t\t * The section ID that contains the form fields.\n\t\t\t *\n\t\t\t * @since 1.0.0\n\t\t\t *\n\t\t\t * @type {string} The section ID\n\t\t\t */\n\t\t\tsectionId: 'custom-affiliate-slugs-settings',\n\n\t\t\t/**\n\t\t\t * Original Slug\n\t\t\t *\n\t\t\t * The original slug that was provided on page load.\n\t\t\t *\n\t\t\t * @since  1.0.0\n\t\t\t * @access public\n\t\t\t *\n\t\t\t * @type string\n\t\t\t */\n\t\t\toriginalSlug: '',\n\n\t\t\t/**\n\t\t\t * Show Confirm Field.\n\t\t\t *\n\t\t\t * Returns true if the confirm setting field should be visible.\n\t\t\t *\n\t\t\t * @since      1.0.0\n\t\t\t * @access     public\n\t\t\t *\n\t\t\t * @returns {boolean} true if visible, otherwise false.\n\t\t\t */\n\t\t\tshowConfirmField() {\n\t\t\t\tconst slug = this.getField( 'custom-affiliate-slug-setting' );\n\n\t\t\t\tif ( false === slug ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif ( this.originalSlug === slug.value || \"\" === slug.value ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Reset Confirmations.\n\t\t\t *\n\t\t\t * Resets the delete checkbox, the confirm slug, and their validations.\n\t\t\t *\n\t\t\t * @since      1.0.0\n\t\t\t * @access     public\n\t\t\t *\n\t\t\t * @returns {Promise<void>}\n\t\t\t */\n\t\t\tasync resetConfirmations() {\n\n\t\t\t\t// Reset confirmation values\n\t\t\t\tthis.updateFieldValue( \"custom-affiliate-slug-confirm-delete\", false );\n\t\t\t\tthis.updateFieldValue( \"custom-affiliate-slug-confirm\", '' );\n\t\t\t\tthis.isValidating = true;\n\n\t\t\t\t// Reset confirmations.\n\t\t\t\tthis.removeErrors( ['custom-affiliate-slug-confirm', 'custom-affiliate-slug-confirm-delete'] )\n\t\t\t\tawait Promise.all( [\n\t\t\t\t\tthis.validateControl( 'custom-affiliate-slug-confirm' ),\n\t\t\t\t\tthis.validateControl( 'custom-affiliate-slug-confirm-delete' )\n\t\t\t\t] );\n\t\t\t\tthis.isValidating = false;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Validate Control.\n\t\t\t *\n\t\t\t * Validates a control by the provided ID, and sets the error if so\n\t\t\t *\n\t\t\t * @since 1.0.0\n\t\t\t * @access public\n\t\t\t * @param {String} id Control ID.\n\t\t\t *\n\t\t\t * @returns {Promise<void>}\n\t\t\t */\n\t\t\tasync validateControl( id ) {\n\t\t\t\tconst validateControl = form.validateControl.bind( this );\n\n\t\t\t\tif ( 'custom-affiliate-slug-setting' === id ) {\n\t\t\t\t\tawait this.resetConfirmations();\n\t\t\t\t}\n\n\t\t\t\tvalidateControl( id );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Show Confirm Delete Field.\n\t\t\t *\n\t\t\t * Returns true if the confirm delete setting checkbox should be visible.\n\t\t\t *\n\t\t\t * @since      1.0.0\n\t\t\t * @access     public\n\t\t\t *\n\t\t\t * @returns {boolean} true if visible, otherwise false.\n\t\t\t */\n\t\t\tshowConfirmDeleteField() {\n\t\t\t\tif ( true === this.isLoading ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst slug = this.getField( 'custom-affiliate-slug-setting' );\n\n\t\t\t\tif ( false === slug ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif ( '' === this.originalSlug || \"\" !== slug.value ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Submit Form.\n\t\t\t *\n\t\t\t * Actions that should be taken when the form is submitted.\n\t\t\t *\n\t\t\t * @since      1.0.0\n\t\t\t * @access     public\n\t\t\t *\n\t\t\t * @returns {Promise<void>}\n\t\t\t */\n\t\t\tasync submitForm() {\n\t\t\t\tconst submitForm = form.submitForm.bind( this );\n\t\t\t\tawait submitForm();\n\t\t\t\tthis.resetConfirmations();\n\t\t\t\tthis.resetSlug();\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Reset Slug.\n\t\t\t *\n\t\t\t * Resets the original slug value to whatever the current slug setting value is.\n\t\t\t *\n\t\t\t * @since 1.0.0\n\t\t\t *\n\t\t\t * @returns {Promise<void>}\n\t\t\t */\n\t\t\tresetSlug() {\n\t\t\t\t// Just after setup is complete, get the field value.\n\t\t\t\tconst slug = this.getField( 'custom-affiliate-slug-setting' );\n\n\t\t\t\tif ( false !== slug ) {\n\t\t\t\t\tthis.originalSlug = slug.value;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Init.\n\t\t\t *\n\t\t\t * Fires when this object is set up.\n\t\t\t *\n\t\t\t * @since      1.0.0\n\t\t\t * @access     public\n\t\t\t *\n\t\t\t * @returns {Promise<void>}\n\t\t\t */\n\t\t\tasync init() {\n\t\t\t\tconst init = form.init.bind( this );\n\t\t\t\tawait init();\n\t\t\t\tthis.resetSlug();\n\t\t\t}\n\n\t\t}\n\t}\n}\n\nexport default settings;"],"names":["prepareForm","settings","form","sectionId","originalSlug","showConfirmField","slug","getField","value","resetConfirmations","updateFieldValue","isValidating","removeErrors","Promise","all","validateControl","id","bind","showConfirmDeleteField","isLoading","submitForm","resetSlug","init"],"sourceRoot":""}